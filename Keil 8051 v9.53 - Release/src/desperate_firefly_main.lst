C51 COMPILER V9.53.0.0   DESPERATE_FIREFLY_MAIN                                            12/16/2017 14:09:00 PAGE 1   


C51 COMPILER V9.53.0.0, COMPILATION OF MODULE DESPERATE_FIREFLY_MAIN
OBJECT MODULE PLACED IN .\src\desperate_firefly_main.OBJ
COMPILER INVOKED BY: c:\SiliconLabs\SimplicityStudio\v4\developer\toolchains\keil_8051\9.53\BIN\C51.exe C:\Users\Jacques
                    -\SimplicityStudio\v4_workspace\desperate_firefly\src\desperate_firefly_main.c OMF2 SMALL DEBUG OBJECTEXTEND ROM(LARGE) W
                    -ARNINGLEVEL(2) FLOATFUZZY(3) OPTIMIZE(9,SPEED) DEFINE(NDEBUG=1) INTVECTOR(0X0000) INTPROMOTE INCDIR(C:\Users\Jacques\Sim
                    -plicityStudio\v4_workspace\desperate_firefly\inc;C:/SiliconLabs/SimplicityStudio/v4/developer/sdks/8051/v4.1.0//Device/s
                    -hared/si8051base;C:/SiliconLabs/SimplicityStudio/v4/developer/sdks/8051/v4.1.0//Device/EFM8BB1/inc) REGFILE(desperate_fi
                    -refly.ORC) PRINT(.\src\desperate_firefly_main.lst) COND CODE PAGEWIDTH(120) PAGELENGTH(65) OBJECT(.\src\desperate_firefl
                    -y_main.OBJ)

line level    source

   1          //=========================================================
   2          // src/desperate_firefly_main.c: generated by Hardware Configurator
   3          //
   4          // This file will be updated when saving a document.
   5          // leave the sections inside the "$[...]" comment tags alone
   6          // or they will be overwritten!!
   7          //=========================================================
   8          
   9          //-----------------------------------------------------------------------------
  10          // Includes
  11          //-----------------------------------------------------------------------------
  12          #include <SI_EFM8BB1_Register_Enums.h>                  // SFR declarations
  13          #include "InitDevice.h"
  14          // $[Generated Includes]
  15          // [Generated Includes]$
  16          
  17          //-----------------------------------------------------------------------------
  18          // SiLabs_Startup() Routine
  19          // ----------------------------------------------------------------------------
  20          // This function is called immediately after reset, before the initialization
  21          // code is run in SILABS_STARTUP.A51 (which runs before main() ). This is a
  22          // useful place to disable the watchdog timer, which is enable by default
  23          // and may trigger before main() in some instances.
  24          //-----------------------------------------------------------------------------
  25          void SiLabs_Startup (void)
  26          {
  27   1      
  28   1      }
  29          
  30          // bit pattern to generate SOS morse code: dit,dit,dit,dah,dah,dah,dit,dit,dit
  31          code char sos[4]={0xab,0xbb,0xaa,0};
  32          
  33          //-----------------------------------------------------------------------------
  34          // main() Routine
  35          // ----------------------------------------------------------------------------
  36          int main (void)
  37          {
  38   1              unsigned char b,c;
  39   1      
  40   1      #define LED (1<<3)
  41   1      // Call hardware initialization routine
  42   1        enter_DefaultMode_from_RESET();
  43   1        b=0;
  44   1        while (1) 
  45   1        {
  46   2                PCON0|=PCON0_IDLE__BMASK;
  47   2      //        P1^=LED;
  48   2      
  49   2              c=sos[b/8]&(1<<(7-b%8));
  50   2          b++;
C51 COMPILER V9.53.0.0   DESPERATE_FIREFLY_MAIN                                            12/16/2017 14:09:00 PAGE 2   

  51   2          if (b==28) b=0;
  52   2              if (c)
  53   2                      P1&=~(1<<3); // port 1 pin 3 latch low LED ON
  54   2              else
  55   2                      P1|=(1<<3); // port 1 pin 3 latch high  LED OFF
  56   2        }
  57   1      
  58   1      }
C51 COMPILER V9.53.0.0   DESPERATE_FIREFLY_MAIN                                            12/16/2017 14:09:00 PAGE 3   

ASSEMBLY LISTING OF GENERATED OBJECT CODE


             ; FUNCTION SiLabs_Startup (BEGIN)
                                           ; SOURCE LINE # 25
                                           ; SOURCE LINE # 26
                                           ; SOURCE LINE # 28
0000 22                RET     
             ; FUNCTION SiLabs_Startup (END)

             ; FUNCTION main (BEGIN)
                                           ; SOURCE LINE # 36
                                           ; SOURCE LINE # 37
                                           ; SOURCE LINE # 42
0000 120000      E     LCALL   enter_DefaultMode_from_RESET
                                           ; SOURCE LINE # 43
;---- Variable 'b' assigned to Register 'R7' ----
0003 E4                CLR     A
0004 FF                MOV     R7,A
0005         ?C0002:
                                           ; SOURCE LINE # 44
                                           ; SOURCE LINE # 45
                                           ; SOURCE LINE # 46
0005 438701            ORL     PCON0,#01H
                                           ; SOURCE LINE # 49
0008 EF                MOV     A,R7
0009 13                RRC     A
000A 13                RRC     A
000B 13                RRC     A
000C 541F              ANL     A,#01FH
000E 900000      R     MOV     DPTR,#sos
0011 93                MOVC    A,@A+DPTR
0012 FE                MOV     R6,A
0013 EF                MOV     A,R7
0014 5407              ANL     A,#07H
0016 FD                MOV     R5,A
0017 C3                CLR     C
0018 7407              MOV     A,#07H
001A 9D                SUBB    A,R5
001B FD                MOV     R5,A
001C 7401              MOV     A,#01H
001E A805              MOV     R0,AR5
0020 08                INC     R0
0021 8002              SJMP    ?C0009
0023         ?C0008:
0023 C3                CLR     C
0024 33                RLC     A
0025         ?C0009:
0025 D8FC              DJNZ    R0,?C0008
0027 5E                ANL     A,R6
0028 FE                MOV     R6,A
;---- Variable 'c' assigned to Register 'R6' ----
                                           ; SOURCE LINE # 50
0029 0F                INC     R7
                                           ; SOURCE LINE # 51
002A BF1C02            CJNE    R7,#01CH,?C0004
002D E4                CLR     A
002E FF                MOV     R7,A
002F         ?C0004:
                                           ; SOURCE LINE # 52
002F EE                MOV     A,R6
0030 6005              JZ      ?C0005
                                           ; SOURCE LINE # 53
C51 COMPILER V9.53.0.0   DESPERATE_FIREFLY_MAIN                                            12/16/2017 14:09:00 PAGE 4   

0032 5390F7            ANL     P1,#0F7H
0035 80CE              SJMP    ?C0002
0037         ?C0005:
                                           ; SOURCE LINE # 55
0037 439008            ORL     P1,#08H
                                           ; SOURCE LINE # 56
003A 80C9              SJMP    ?C0002
             ; FUNCTION main (END)



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     61    ----
   CONSTANT SIZE    =      4    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
