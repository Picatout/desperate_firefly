C51 COMPILER V9.53.0.0   DESPERATE_FIREFLY_MAIN                                            12/15/2017 17:21:30 PAGE 1   


C51 COMPILER V9.53.0.0, COMPILATION OF MODULE DESPERATE_FIREFLY_MAIN
OBJECT MODULE PLACED IN .\src\desperate_firefly_main.OBJ
COMPILER INVOKED BY: c:\SiliconLabs\SimplicityStudio\v4\developer\toolchains\keil_8051\9.53\BIN\C51.exe C:\Users\Jacques
                    -\SimplicityStudio\v4_workspace\desperate_firefly\src\desperate_firefly_main.c OMF2 SMALL DEBUG OBJECTEXTEND ROM(LARGE) W
                    -ARNINGLEVEL(2) FLOATFUZZY(3) OPTIMIZE(9,SPEED) DEFINE(NDEBUG=1) INTVECTOR(0X0000) INTPROMOTE INCDIR(C:\Users\Jacques\Sim
                    -plicityStudio\v4_workspace\desperate_firefly\inc;C:/SiliconLabs/SimplicityStudio/v4/developer/sdks/8051/v4.0.8//Device/s
                    -hared/si8051base;C:/SiliconLabs/SimplicityStudio/v4/developer/sdks/8051/v4.0.8//Device/EFM8BB1/inc) REGFILE(desperate_fi
                    -refly.ORC) PRINT(.\src\desperate_firefly_main.lst) COND CODE PAGEWIDTH(120) PAGELENGTH(65) OBJECT(.\src\desperate_firefl
                    -y_main.OBJ)

line level    source

   1          //=========================================================
   2          // src/desperate_firefly_main.c: generated by Hardware Configurator
   3          //
   4          // This file will be updated when saving a document.
   5          // leave the sections inside the "$[...]" comment tags alone
   6          // or they will be overwritten!!
   7          //=========================================================
   8          
   9          //-----------------------------------------------------------------------------
  10          // Includes
  11          //-----------------------------------------------------------------------------
  12          #include <SI_EFM8BB1_Register_Enums.h>                  // SFR declarations
  13          #include "InitDevice.h"
  14          // $[Generated Includes]
  15          // [Generated Includes]$
  16          
  17          //-----------------------------------------------------------------------------
  18          // SiLabs_Startup() Routine
  19          // ----------------------------------------------------------------------------
  20          // This function is called immediately after reset, before the initialization
  21          // code is run in SILABS_STARTUP.A51 (which runs before main() ). This is a
  22          // useful place to disable the watchdog timer, which is enable by default
  23          // and may trigger before main() in some instances.
  24          //-----------------------------------------------------------------------------
  25          void SiLabs_Startup (void)
  26          {  //disable watchdog timer
  27   1         WDTCN = 0xDE; //First key
  28   1         WDTCN = 0xAD; //Second key
  29   1      }
  30          
  31          // bit pattern to generate SOS morse code: dit,dit,dit,dah,dah,dah,dit,dit,dit
  32          code char sos[4]={0xab,0xbb,0xaa,0};
  33          
  34          //-----------------------------------------------------------------------------
  35          // main() Routine
  36          // ----------------------------------------------------------------------------
  37          int main (void)
  38          {
  39   1              unsigned char b,c;
  40   1      
  41   1      // Call hardware initialization routine
  42   1        enter_DefaultMode_from_RESET();
  43   1        b=0;
  44   1        while (1) 
  45   1        {
  46   2              c=sos[b/8]&(1<<(7-b%8));
  47   2          b++;
  48   2          if (b==28) b=0;
  49   2              if (c)
  50   2                      P1&=~(1<<3); // port 1 pin 3 latch low LED ON
C51 COMPILER V9.53.0.0   DESPERATE_FIREFLY_MAIN                                            12/15/2017 17:21:30 PAGE 2   

  51   2              else
  52   2                      P1|=(1<<3); // port 1 pin 3 latch high  LED OFF
  53   2        }
  54   1      
  55   1      }
C51 COMPILER V9.53.0.0   DESPERATE_FIREFLY_MAIN                                            12/15/2017 17:21:30 PAGE 3   

ASSEMBLY LISTING OF GENERATED OBJECT CODE


             ; FUNCTION SiLabs_Startup (BEGIN)
                                           ; SOURCE LINE # 25
                                           ; SOURCE LINE # 26
                                           ; SOURCE LINE # 27
0000 7597DE            MOV     WDTCN,#0DEH
                                           ; SOURCE LINE # 28
0003 7597AD            MOV     WDTCN,#0ADH
                                           ; SOURCE LINE # 29
0006 22                RET     
             ; FUNCTION SiLabs_Startup (END)

             ; FUNCTION main (BEGIN)
                                           ; SOURCE LINE # 37
                                           ; SOURCE LINE # 38
                                           ; SOURCE LINE # 42
0000 120000      E     LCALL   enter_DefaultMode_from_RESET
                                           ; SOURCE LINE # 43
;---- Variable 'b' assigned to Register 'R7' ----
0003 E4                CLR     A
0004 FF                MOV     R7,A
0005         ?C0002:
                                           ; SOURCE LINE # 44
                                           ; SOURCE LINE # 45
                                           ; SOURCE LINE # 46
0005 EF                MOV     A,R7
0006 13                RRC     A
0007 13                RRC     A
0008 13                RRC     A
0009 541F              ANL     A,#01FH
000B 900000      R     MOV     DPTR,#sos
000E 93                MOVC    A,@A+DPTR
000F FE                MOV     R6,A
0010 EF                MOV     A,R7
0011 5407              ANL     A,#07H
0013 FD                MOV     R5,A
0014 C3                CLR     C
0015 7407              MOV     A,#07H
0017 9D                SUBB    A,R5
0018 FD                MOV     R5,A
0019 7401              MOV     A,#01H
001B A805              MOV     R0,AR5
001D 08                INC     R0
001E 8002              SJMP    ?C0009
0020         ?C0008:
0020 C3                CLR     C
0021 33                RLC     A
0022         ?C0009:
0022 D8FC              DJNZ    R0,?C0008
0024 5E                ANL     A,R6
0025 FE                MOV     R6,A
;---- Variable 'c' assigned to Register 'R6' ----
                                           ; SOURCE LINE # 47
0026 0F                INC     R7
                                           ; SOURCE LINE # 48
0027 BF1C02            CJNE    R7,#01CH,?C0004
002A E4                CLR     A
002B FF                MOV     R7,A
002C         ?C0004:
                                           ; SOURCE LINE # 49
002C EE                MOV     A,R6
C51 COMPILER V9.53.0.0   DESPERATE_FIREFLY_MAIN                                            12/15/2017 17:21:30 PAGE 4   

002D 6005              JZ      ?C0005
                                           ; SOURCE LINE # 50
002F 5390F7            ANL     P1,#0F7H
0032 80D1              SJMP    ?C0002
0034         ?C0005:
                                           ; SOURCE LINE # 52
0034 439008            ORL     P1,#08H
                                           ; SOURCE LINE # 53
0037 80CC              SJMP    ?C0002
             ; FUNCTION main (END)



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     64    ----
   CONSTANT SIZE    =      4    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
